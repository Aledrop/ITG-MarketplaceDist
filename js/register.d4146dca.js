"use strict";(self["webpackChunkmarket"]=self["webpackChunkmarket"]||[]).push([[685],{211:function(e,l,a){a.r(l),a.d(l,{default:function(){return se}});var r=a(3396),s=a(7139),o=a(4870),n=a(9242),t=a(1728),u=a(9204),i=a(2492),p=a.n(i),c=a(2682),d=a(1549),_=a(9709),m=(a(1703),a(7658),a(7176));const v={async all(){let e="/gender";try{let l=await m.E.request({url:e});if(!l)throw{msg:"Error en la solicitud de las gender",error:l};return l}catch(l){let a=`Error ${l.response?.status}: ${l.response?.statusText}\nURL: ${e}\nResponse data: ${JSON.stringify(l.response?.data)}`;throw new Error(a)}},async getSimpleList(){let e="/gender";try{let l=await m.E.request({url:e});if(!l)throw{msg:"Error en la solicitud de los gender",error:l};const a=[];for(let e of l){const l={value:e.id,text:e.alias};a.push(l)}return a}catch(l){let a=`Error ${l.response?.status}: ${l.response?.statusText}\nURL: ${e}\nResponse data: ${JSON.stringify(l.response?.data)}`;throw new Error(a)}}};var f=a(5562),w=a(6795);const y=e=>((0,r.dD)("data-v-ae46ca50"),e=e(),(0,r.Cn)(),e),g={class:"flex flex-col lg:flex-row w-full justify-between bg-white p-5 mb-4 gap-10"},x=y((()=>(0,r._)("figure",{class:"w-full flex justify-center bg-contain"},[(0,r._)("img",{src:"http://via.placeholder.com/640x360",alt:""})],-1))),h=y((()=>(0,r._)("div",{class:"mb-5 w-full"},[(0,r._)("h4",null,"Registrarse")],-1))),b={class:"flex flex-col md:flex-row gap-5 w-full mb-2"},U={class:"w-full mb-2"},C={class:"span_error"},S={class:"w-full mb-2"},E={class:"span_error"},V={class:"flex flex-col md:flex-row gap-5 w-full mb-2"},z={class:"w-full mb-2"},q={class:"span_error"},k={class:"w-full mb-2"},I={class:"span_error"},L={class:"flex flex-col md:flex-row gap-5 w-full mb-2"},$={class:"w-full mb-2"},H={class:"span_error"},P={class:"w-full mb-2"},R={class:"span_error"},j={class:"flex flex-col md:flex-row gap-5 w-full mb-2"},N={class:"w-full mb-2"},O={class:"span_error"},B={class:"w-full mb-2"},F={class:"span_error"},J={class:"flex flex-col md:flex-row gap-5 w-full mb-2"},T={class:"w-full mb-2"},W={class:"span_error"},D={class:"w-full mb-2"},Z={class:"py-6 text-3xl"},A=y((()=>(0,r._)("i",{class:"fa fa-spinner fa-pulse"},null,-1))),G=[A],M={class:"span_error"},X={class:"flex flex-col md:flex-row gap-5 w-full mb-2"},Y={class:"w-full mb-2"},K={class:"span_error"},Q={class:"w-full mb-2"},ee={class:"span_error"};var le={__name:"RegisterView",setup(e){const l=(0,w.t)(),{validateOnlyText:a,validatePhone:i,validateEmail:m}=(0,u.Z)(),y=(0,o.iH)({}),A=(0,o.iH)([]),le=(0,o.iH)([]),ae=(0,o.iH)([]),re=(0,o.iH)([]),se=(0,o.iH)(!1),oe=(0,o.iH)({first_name:"",last_name:"",email:"",phone:"",password:"",confirm_password:"",country:"",zip_code:"",province:"",city:"",address:"",gender:"",is_travel_agency:!1,i_a_t_a:"",company:"",confirmation_link:"/verify-user",roles:[9]});(0,r.wF)((async()=>{const e=await Promise.all([f.X.getSimpleList(),d.d.getSimpleList(),v.getSimpleList()]);A.value=e[0],le.value=e[1],ae.value=e[2]}));const ne=async()=>{try{se.value=!0,re.value=await _.F.getSimpleList(oe.value.province)}catch(e){console.log(e)}finally{se.value=!1}};(0,r.YP)((()=>oe.value.province),(()=>{ne()}));const te=e=>{let l=!0;return e.forEach((e=>{oe.value[e]?y.value[e]="":(y.value[e]="El campo es requerido",l=!1)})),l},ue=(e,l,a)=>l(oe.value[e])||""===oe.value[e]?(y.value[e]="",!1):(y.value[e]=a,!0),ie=()=>{oe.value.password.length>20?y.value["password"]="El campo es muy largo":y.value["password"]="",pe()},pe=()=>{oe.value.password!==oe.value.confirm_password?y.value["confirm_password"]="Los password no son iguales":y.value["confirm_password"]=""};let ce=()=>ue("first_name",a,"El nombre no es válido"),de=()=>ue("last_name",a,"El apellido no es válido"),_e=()=>ue("email",m,"El email no es válido"),me=()=>ue("phone",i,"El teléfono no es válido");const ve=e=>{const a=JSON.parse(JSON.stringify(e)),r={...a,gender_id:a.gender,country_id:a.country,password:l.encryptPass(a.password)};return delete r.confirm_password,delete r.gender,delete r.country,r},fe=async e=>{e.preventDefault();let a=["first_name","last_name","email","phone","password","confirm_password","country","zip_code","province","city","address","gender"];if(!te(a))return p().fire({title:"Validación",text:"Error de validación",icon:"error",confirmButtonColor:"#3085d6"});let r=ve(oe.value);try{let e=await l.register(r);return e?p().fire({title:"Confirmación",text:"Se realiza el registro exitosamente, revise su correo",icon:"success",confirmButtonColor:"#3085d6"}):p().fire({title:"Error",text:"Error en la acción de registro, revise los datos e intentelo de nuevo",icon:"error",confirmButtonColor:"#3085d6"})}catch(s){return console.log(s),p().fire({title:"Error",text:"Error en la acción de registro, revise los datos e intentelo de nuevo",icon:"error",confirmButtonColor:"#3085d6"})}};return(e,l)=>((0,r.wg)(),(0,r.j4)(t.Z,null,{default:(0,r.w5)((()=>[(0,r._)("section",g,[x,(0,r._)("form",{class:"flex flex-col items-center justify-center w-full",onSubmit:fe},[h,(0,r._)("div",b,[(0,r._)("div",U,[(0,r.wy)((0,r._)("input",{class:(0,s.C_)(["input_form",{input_form_error:y.value.first_name}]),"onUpdate:modelValue":l[0]||(l[0]=e=>oe.value.first_name=e),onInput:l[1]||(l[1]=(...e)=>(0,o.SU)(ce)&&(0,o.SU)(ce)(...e)),type:"text",placeholder:"Nombre*"},null,34),[[n.nr,oe.value.first_name]]),(0,r._)("span",C,(0,s.zw)(y.value.first_name),1)]),(0,r._)("div",S,[(0,r.wy)((0,r._)("input",{class:(0,s.C_)(["input_form",{input_form_error:y.value.last_name}]),"onUpdate:modelValue":l[2]||(l[2]=e=>oe.value.last_name=e),onInput:l[3]||(l[3]=(...e)=>(0,o.SU)(de)&&(0,o.SU)(de)(...e)),type:"text",placeholder:"Apellidos*"},null,34),[[n.nr,oe.value.last_name]]),(0,r._)("span",E,(0,s.zw)(y.value.last_name),1)])]),(0,r._)("div",V,[(0,r._)("div",z,[(0,r.wy)((0,r._)("input",{class:(0,s.C_)(["input_form",{input_form_error:y.value.email}]),"onUpdate:modelValue":l[4]||(l[4]=e=>oe.value.email=e),onInput:l[5]||(l[5]=(...e)=>(0,o.SU)(_e)&&(0,o.SU)(_e)(...e)),type:"email",placeholder:"Email*"},null,34),[[n.nr,oe.value.email]]),(0,r._)("span",q,(0,s.zw)(y.value.email),1)]),(0,r._)("div",k,[(0,r.wy)((0,r._)("input",{class:(0,s.C_)(["input_form",{input_form_error:y.value.phone}]),"onUpdate:modelValue":l[6]||(l[6]=e=>oe.value.phone=e),onInput:l[7]||(l[7]=(...e)=>(0,o.SU)(me)&&(0,o.SU)(me)(...e)),type:"tel",placeholder:"Teléfono*"},null,34),[[n.nr,oe.value.phone]]),(0,r._)("span",I,(0,s.zw)(y.value.phone),1)])]),(0,r._)("div",L,[(0,r._)("div",$,[(0,r.wy)((0,r._)("input",{class:(0,s.C_)(["input_form",{input_form_error:y.value.password}]),"onUpdate:modelValue":l[8]||(l[8]=e=>oe.value.password=e),onInput:ie,type:"password",placeholder:"Contraseña*"},null,34),[[n.nr,oe.value.password]]),(0,r._)("span",H,(0,s.zw)(y.value.password),1)]),(0,r._)("div",P,[(0,r.wy)((0,r._)("input",{class:(0,s.C_)(["input_form",{input_form_error:y.value.confirm_password}]),"onUpdate:modelValue":l[9]||(l[9]=e=>oe.value.confirm_password=e),onInput:pe,type:"password",placeholder:"Confirme la contraseña*"},null,34),[[n.nr,oe.value.confirm_password]]),(0,r._)("span",R,(0,s.zw)(y.value.confirm_password),1)])]),(0,r._)("div",j,[(0,r._)("div",N,[(0,r.Wm)((0,o.SU)(c.q2),{options:A.value,placeholder:"País*",modelValue:oe.value.country,"onUpdate:modelValue":l[10]||(l[10]=e=>oe.value.country=e),required:"",class:(0,s.C_)(["input_form",{input_form_error:y.value.country}])},null,8,["options","modelValue","class"]),(0,r._)("span",O,(0,s.zw)(y.value.country),1)]),(0,r._)("div",B,[(0,r.wy)((0,r._)("input",{class:(0,s.C_)(["input_form",{input_form_error:y.value.confirm_password}]),"onUpdate:modelValue":l[11]||(l[11]=e=>oe.value.zip_code=e),onInput:pe,type:"text",placeholder:"Código postal"},null,34),[[n.nr,oe.value.zip_code]]),(0,r._)("span",F,(0,s.zw)(y.value.confirm_password),1)])]),(0,r._)("div",J,[(0,r._)("div",T,[(0,r.Wm)((0,o.SU)(c.q2),{options:le.value,placeholder:"Provincia*",modelValue:oe.value.province,"onUpdate:modelValue":l[12]||(l[12]=e=>oe.value.province=e),onSearchchange:ne,required:"",class:(0,s.C_)(["input_form",{input_form_error:y.value.province}])},null,8,["options","modelValue","class"]),(0,r._)("span",W,(0,s.zw)(y.value.province),1)]),(0,r._)("div",D,[(0,r.wy)((0,r._)("div",Z,G,512),[[n.F8,se.value]]),(0,r.wy)((0,r.Wm)((0,o.SU)(c.q2),{options:re.value,modelValue:oe.value.city,"onUpdate:modelValue":l[13]||(l[13]=e=>oe.value.city=e),placeholder:"Municipio*",required:"",class:(0,s.C_)(["input_form",{input_form_error:y.value.city}])},null,8,["options","modelValue","class"]),[[n.F8,!se.value]]),(0,r._)("span",M,(0,s.zw)(y.value.city),1)])]),(0,r._)("div",X,[(0,r._)("div",Y,[(0,r.wy)((0,r._)("input",{class:(0,s.C_)(["input_form",{input_form_error:y.value.address}]),"onUpdate:modelValue":l[14]||(l[14]=e=>oe.value.address=e),type:"text",placeholder:"Dirección"},null,2),[[n.nr,oe.value.address]]),(0,r._)("span",K,(0,s.zw)(y.value.address),1)]),(0,r._)("div",Q,[(0,r.Wm)((0,o.SU)(c.q2),{options:ae.value,modelValue:oe.value.gender,"onUpdate:modelValue":l[15]||(l[15]=e=>oe.value.gender=e),placeholder:"Genero*",required:"",class:(0,s.C_)(["input_form",{input_form_error:y.value.gender}])},null,8,["options","modelValue","class"]),(0,r._)("span",ee,(0,s.zw)(y.value.gender),1)])]),(0,r._)("div",{class:"flex items-center justify-end mb-5 w-full"},[(0,r._)("button",{class:"bg-sky-800 hover:bg-sky-800/80 text-white font-bold py-2 px-4 rounded",type:"submit",onClick:fe}," Enviar ")])],32)])])),_:1}))}},ae=a(89);const re=(0,ae.Z)(le,[["__scopeId","data-v-ae46ca50"]]);var se=re}}]);
//# sourceMappingURL=register.d4146dca.js.map