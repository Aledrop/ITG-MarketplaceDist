"use strict";(self["webpackChunkmarket"]=self["webpackChunkmarket"]||[]).push([[897],{329:function(e,t,r){r.d(t,{Y:function(){return a}});r(1703);var s=r(7176);const a={async allCategories(){let e="/marketplace-category";try{let t=await s.E.request({url:e});if(!t)throw{msg:"Error en la solicitud de las categories",error:t};return t}catch(t){let r=`Error ${t.response?.status}: ${t.response?.statusText}\nURL: ${e}\nResponse data: ${JSON.stringify(t.response?.data)}`;throw new Error(r)}},async getCategory(e){let t=`/marketplace-category/${e}`;try{let e=await s.E.request({url:t});if(!e)throw{msg:"Error en la solicitud de la categoria",error:e};return e}catch(r){let e=`Error ${r.response?.status}: ${r.response?.statusText}\nURL: ${t}\nResponse data: ${JSON.stringify(r.response?.data)}`;throw new Error(e)}}}},9207:function(e,t,r){r.d(t,{R:function(){return n}});r(1703),r(7658);var s=r(7176),a=r(6795);const o=(0,a.t)(),n={async allProducts(){let e="/marketplace-items";try{let t=await s.E.request({url:e});if(!t)throw{msg:"Error en la solicitud de los productos",error:t};return t}catch(t){let r=`Error ${t.response?.status}: ${t.response?.statusText}\nURL: ${e}\nResponse data: ${JSON.stringify(t.response?.data)}`;throw new Error(r)}},async searchProduct(e){let t="/marketplace-items/search-by-criteria";try{o.token||o.getToken();let r={url:t,method:"post",token:o.token,data:e},a=await s.E.request(r);if(!a)throw{msg:"Error en la solicitud del producto",error:a};return a}catch(r){let e=`Error ${r.response?.status}: ${r.response?.statusText}\nURL: ${t}\nResponse data: ${JSON.stringify(r.response?.data)}`;throw new Error(e)}},async getProductId(e){let t=`/marketplace-items/${e}`;try{o.token||o.getToken();let e={url:t,token:o.token},r=await s.E.request(e);if(!r)throw{msg:"Error en la solicitud del producto",error:r};return r}catch(r){let e=`Error ${r.response?.status}: ${r.response?.statusText}\nURL: ${t}\nResponse data: ${JSON.stringify(r.response?.data)}`;throw new Error(e)}},async getProductKeyword(e){o.token||o.getToken();let t={url:"/marketplace-items/search-by-criteria",method:"post",token:o.token,data:{keyword:e}};try{let e=await s.E.request(t);if(!e)throw{msg:"Error en la solicitud del producto",error:e};return e}catch(r){let e=`Error ${r.response?.status}: ${r.response?.statusText}\nURL: ${t.url}\nResponse data: ${JSON.stringify(r.response?.data)}`;throw new Error(e)}},async getProducts(e){try{let t=e.map((e=>this.getProductId(e.id))),r=await Promise.all(t);if(0===r.length)throw{msg:"Error en la función getProducts"};return r}catch(t){let e=`Error ${t.response?.status}: ${t.response?.statusText}\nResponse data: ${JSON.stringify(t.response?.data)}`;throw new Error(e)}},mergeCartWithList(e,t){try{return e.forEach((e=>{t.forEach((t=>{e.id===t.id&&(e.count=t.count)}))})),e}catch(r){let e={msg:"Error en mergeCartWithList",error:r};throw new Error(e)}},getProductsWithPrice(e){try{const t=[];return e.forEach((e=>{const r=e,s={marketplace_item_id:r.id,date:(new Date).toISOString().slice(0,10),cant:r.count,price:(r.count*r.price).toString()};t.push(s)})),t}catch(t){let e={msg:"Error en mergeCartWithList",error:t};throw new Error(e)}},getTotalPriceOfAllProducts(e){try{let t=0;return e.forEach((e=>{t+=e.count*e.price})),t}catch(t){let e={msg:"Error en mergeCartWithList",error:t};throw new Error(e)}}}},2440:function(e,t,r){r.d(t,{Z:function(){return u}});var s=r(3396),a=r(7139),o=r(9595),n=r(4870);const l={class:"flex items-center justify-between rounded-lg"};var c={__name:"BtnAddLess",props:{item:Object},emits:["updCart"],setup(e,{emit:t}){const r=e,c=(0,o.x)(),i=(0,n.iH)(!1),u=()=>{p(),c.addProduct(r.item),t("updCart")},d=()=>{p(),c.removeProduct(r.item),t("updCart")},p=()=>{i.value=!0,setTimeout((()=>{i.value=!1}),500)},g=(0,s.Fl)((()=>{const e=c.prods.find((e=>e.id===r.item.id));return e?e.count:0}));return(e,t)=>((0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("button",{class:"rounded-l-lg bg-gray-300 w-8",onClick:t[0]||(t[0]=e=>d())},"-"),(0,s._)("div",{class:(0,a.C_)(["w-8 text-gray-800",{"scale-150 transition-transform animate-spin":i.value}])},(0,a.zw)(g.value),3),(0,s._)("button",{class:"rounded-r-lg bg-gray-300 w-8",onClick:t[1]||(t[1]=e=>u())},"+")]))}};const i=c;var u=i},2639:function(e,t,r){r.d(t,{Z:function(){return x}});r(7658);var s=r(3396),a=r(7139),o=r(4870),n=r(2440),l=r(2483),c=r(9595);const i={class:"border border-gray-300 flex flex-col rounded-lg items-center w-60"},u={class:""},d={class:"flex items-center w-60 h-52 px-1 bg-cover overflow-hidden border-b border-gray-300"},p=["src"],g={class:"flex flex-col"},w={class:"block w-full py-2"},m={class:"flex w-full justify-end pr-8"},f={class:"text-sky-800 text-lg"},h={class:"flex px-2 gap-4 justify-between w-full"};var y={__name:"CardListTemplate",props:{item:Object},setup(e){const t=e,r=(0,l.tv)(),y=(0,c.x)(),v=()=>y.addProduct(t.item),x=()=>{r.push({name:"ProductDetail",params:{keyword:t.item.keyword}})},k=()=>{v(),r.push({name:"ShoppingCart"})};return(e,r)=>((0,s.wg)(),(0,s.iD)("section",i,[(0,s._)("article",u,[(0,s._)("figure",d,[(0,s._)("img",{src:t.item.src,alt:"",class:"bg-slate-400"},null,8,p)]),(0,s._)("figcaption",g,[(0,s._)("h4",{class:"text-gray-800 text-base my-2 hover:cursor-pointer",onClick:x},(0,a.zw)(t.item.alias),1)])]),(0,s._)("div",w,[(0,s._)("div",m,[(0,s._)("h4",f,"$"+(0,a.zw)(t.item.price),1)]),(0,s._)("div",h,[(0,s.Wm)((0,o.SU)(n.Z),{item:t.item},null,8,["item"]),(0,s._)("button",{class:"bg-amber-400 px-5 py-2 rounded-lg text-gray-800",onClick:r[0]||(r[0]=e=>k())},"Añadir")])])]))}};const v=y;var x=v},9196:function(e,t,r){r.r(t),r.d(t,{default:function(){return S}});r(7658);var s=r(3396),a=r(9242),o=r(7139),n=r(4870),l=r(355),c=r(1728),i=r(2639),u=r(329),d=r(9207),p=r(2483);const g=e=>((0,s.dD)("data-v-47b12288"),e=e(),(0,s.Cn)(),e),w={class:"flex gap-10 flex-row flex-wrap"},m={class:"m-auto"},f=g((()=>(0,s._)("img",{src:l,alt:"loading..."},null,-1))),h=[f],y={class:"flex flex-col flex-1 gap-8"},v={class:"flex bg-red-500 m-auto p-20 rounded-lg"},x=["textContent"],k={key:0,class:"text-sky-800 text-2xl capitalize"},E={key:1,class:"flex flex-wrap gap-5 justify-items-center"},_={key:2,class:"flex mx-auto p-20"},b=g((()=>(0,s._)("span",{class:"text-lg"},"No hay productos para esta categoría",-1))),$=[b];var C={__name:"ListProductView",setup(e){const t=(0,p.yj)(),r=(0,p.tv)(),l=(0,n.iH)(!0);let g=(0,n.iH)(!1),f=(0,n.iH)("Error al consultar los datos, por favor intente más tarde");const b=(0,s.Fl)((()=>t.params.keyword)),C=(0,n.iH)([]),P=(0,n.iH)([]);(0,s.wF)((()=>{R(b.value)}));const R=async e=>{try{let t={type:"category",value:e};if([C.value,P.value]=await Promise.all([u.Y.allCategories(),d.R.searchProduct(t)]),l.value=!1,!C.value)throw g.value=!0,{msg:"Error en obtener las categorías",error:C.value};if(!P.value)throw g.value=!0,{msg:"Error en obtener las productos",error:C.value};let s=C.value.find((e=>e.alias===b.value));s||r.push({name:"NotFound"})}catch(g){throw console.error("Error al obtener las categorías o los productos: ",g),g}};return(e,t)=>((0,s.wg)(),(0,s.j4)(c.Z,null,{default:(0,s.w5)((()=>[(0,s._)("section",w,[(0,s.wy)((0,s._)("figure",m,h,512),[[a.F8,l.value]]),(0,s.wy)((0,s._)("section",y,[(0,s.wy)((0,s._)("div",v,[(0,s._)("span",{class:"text-lg text-white",textContent:(0,o.zw)((0,n.SU)(f))},null,8,x)],512),[[a.F8,(0,n.SU)(g)]]),b.value?((0,s.wg)(),(0,s.iD)("h3",k,(0,o.zw)(b.value),1)):(0,s.kq)("",!0),P.value.length>0?((0,s.wg)(),(0,s.iD)("section",E,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(P.value,((e,t)=>((0,s.wg)(),(0,s.j4)(i.Z,{key:t,item:e,class:""},null,8,["item"])))),128))])):((0,s.wg)(),(0,s.iD)("section",_,$))],512),[[a.F8,!l.value]])])])),_:1}))}},P=r(89);const R=(0,P.Z)(C,[["__scopeId","data-v-47b12288"]]);var S=R},355:function(e,t,r){e.exports=r.p+"img/loader.3599814a.svg"}}]);
//# sourceMappingURL=product_list.f49aaae5.js.map