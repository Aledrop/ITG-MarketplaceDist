"use strict";(self["webpackChunkmarket"]=self["webpackChunkmarket"]||[]).push([[688],{9207:function(t,e,r){r.d(e,{R:function(){return n}});r(1703),r(7658);var a=r(7176),s=r(6795);const o=(0,s.t)(),n={async allProducts(){let t="/marketplace-items";try{let e=await a.E.request({url:t});if(!e)throw{msg:"Error en la solicitud de los productos",error:e};return e}catch(e){let r=`Error ${e.response?.status}: ${e.response?.statusText}\nURL: ${t}\nResponse data: ${JSON.stringify(e.response?.data)}`;throw new Error(r)}},async searchProduct(t){let e="/marketplace-items/search-by-criteria";try{o.token||o.getToken();let r={url:e,method:"post",token:o.token,data:t},s=await a.E.request(r);if(!s)throw{msg:"Error en la solicitud del producto",error:s};return s}catch(r){let t=`Error ${r.response?.status}: ${r.response?.statusText}\nURL: ${e}\nResponse data: ${JSON.stringify(r.response?.data)}`;throw new Error(t)}},async getProductId(t){let e=`/marketplace-items/${t}`;try{o.token||o.getToken();let t={url:e,token:o.token},r=await a.E.request(t);if(!r)throw{msg:"Error en la solicitud del producto",error:r};return r}catch(r){let t=`Error ${r.response?.status}: ${r.response?.statusText}\nURL: ${e}\nResponse data: ${JSON.stringify(r.response?.data)}`;throw new Error(t)}},async getProductKeyword(t){o.token||o.getToken();let e={url:"/marketplace-items/search-by-criteria",method:"post",token:o.token,data:{keyword:t}};try{let t=await a.E.request(e);if(!t)throw{msg:"Error en la solicitud del producto",error:t};return t}catch(r){let t=`Error ${r.response?.status}: ${r.response?.statusText}\nURL: ${e.url}\nResponse data: ${JSON.stringify(r.response?.data)}`;throw new Error(t)}},async getProducts(t){try{let e=t.map((t=>this.getProductId(t.id))),r=await Promise.all(e);if(0===r.length)throw{msg:"Error en la función getProducts"};return r}catch(e){let t=`Error ${e.response?.status}: ${e.response?.statusText}\nResponse data: ${JSON.stringify(e.response?.data)}`;throw new Error(t)}},mergeCartWithList(t,e){try{return t.forEach((t=>{e.forEach((e=>{t.id===e.id&&(t.count=e.count)}))})),t}catch(r){let t={msg:"Error en mergeCartWithList",error:r};throw new Error(t)}},getProductsWithPrice(t){try{const e=[];return t.forEach((t=>{const r=t,a={marketplace_item_id:r.id,date:(new Date).toISOString().slice(0,10),cant:r.count,price:(r.count*r.price).toString()};e.push(a)})),e}catch(e){let t={msg:"Error en mergeCartWithList",error:e};throw new Error(t)}},getTotalPriceOfAllProducts(t){try{let e=0;return t.forEach((t=>{e+=t.count*t.price})),e}catch(e){let t={msg:"Error en mergeCartWithList",error:e};throw new Error(t)}}}},2440:function(t,e,r){r.d(e,{Z:function(){return u}});var a=r(3396),s=r(7139),o=r(9595),n=r(4870);const l={class:"flex items-center justify-between rounded-lg"};var i={__name:"BtnAddLess",props:{item:Object},emits:["updCart"],setup(t,{emit:e}){const r=t,i=(0,o.x)(),c=(0,n.iH)(!1),u=()=>{p(),i.addProduct(r.item),e("updCart")},d=()=>{p(),i.removeProduct(r.item),e("updCart")},p=()=>{c.value=!0,setTimeout((()=>{c.value=!1}),500)},g=(0,a.Fl)((()=>{const t=i.prods.find((t=>t.id===r.item.id));return t?t.count:0}));return(t,e)=>((0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("button",{class:"rounded-l-lg bg-gray-300 w-8",onClick:e[0]||(e[0]=t=>d())},"-"),(0,a._)("div",{class:(0,s.C_)(["w-8 text-gray-800",{"scale-150 transition-transform animate-spin":c.value}])},(0,s.zw)(g.value),3),(0,a._)("button",{class:"rounded-r-lg bg-gray-300 w-8",onClick:e[1]||(e[1]=t=>u())},"+")]))}};const c=i;var u=c},7377:function(t,e,r){r.r(e),r.d(e,{default:function(){return S}});r(7658);var a=r(3396),s=r(7139),o=r(4870),n=r(1728),l=r(2440),i=r(2483),c=r(9207),u=r(6795);const d={key:0,class:"flex w-full flex-col md:flex-row"},p={class:"flex w-full h-auto md:w-1/2"},g=["src"],m={class:"w-full md:w-5/12"},w={class:"text-justify font-bold text-2xl my-10 text-sky-800 capitalize"},f={class:"flex gap-5 mb-10"},y={class:"text-amber-400 font-bold text-3xl"},h={class:"text-justify mb-10 grid grid-cols-1 gap-2"},x=(0,a._)("p",{class:"font-bold"},"Descripcion: ",-1),v=["textContent"],k={class:"flex flex-col px-2 gap-8 justify-start mb-10"},b={class:"flex gap-5"},E={key:0,class:"flex gap-5 items-center"},_=(0,a._)("div",{class:"bg-gray-300 text-gray-800 px-5 py-2 rounded-lg w-60"},"No Disponible",-1),$=(0,a._)("button",{title:"lo deseo"},[(0,a._)("i",{class:"fas fa-heart text-red-500 fa-lg hover:scale-125"})],-1),P=[_,$],C={key:1,class:"flex flex-col md:flex-row gap-8 justify-between items-start md:items-center"},L=["disabled"];var R={__name:"ProductDetailView",setup(t){const e=(0,u.t)(),r=(0,i.yj)(),_=(0,i.tv)(),$=(0,o.iH)([]);(0,a.wF)((async()=>{try{let t=r.params.keyword;if([$.value]=await Promise.all([c.R.getProductKeyword(t)]),!$.value)throw _.push({name:"NotFound"}),{msg:"Error en obtener el producto",error:$.value}}catch(t){throw console.error("Error al obtener las categorías o los productos: ",t),t}}));const R=()=>{_.push({name:"ShoppingCart"})},D=()=>{e.is_login?_.push({name:"BuyForm"}):_.push({name:"Login"})};return(t,e)=>{const r=(0,a.up)("router-link");return(0,a.wg)(),(0,a.j4)(n.Z,null,{default:(0,a.w5)((()=>[$.value[0]?((0,a.wg)(),(0,a.iD)("article",d,[(0,a._)("figure",p,[(0,a._)("img",{src:$.value[0].src,alt:""},null,8,g)]),(0,a._)("div",m,[(0,a._)("h3",w,(0,s.zw)($.value[0].alias),1),(0,a._)("div",f,[(0,a._)("div",y,"$"+(0,s.zw)($.value[0].price),1)]),(0,a._)("div",h,[x,(0,a._)("p",{class:"leading-7",textContent:(0,s.zw)($.value[0].description)},null,8,v)]),(0,a._)("div",k,[(0,a._)("div",b,[(0,a.Wm)(r,{to:{name:"ListProduct",params:{keyword:$.value[0].marketplace_categories[0].alias}},class:"text-sm text-amber-800 bg-amber-200 px-3 py-2 rounded-lg my-5"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)($.value[0].marketplace_categories[0].alias),1)])),_:1},8,["to"])]),$.value[0].active?((0,a.wg)(),(0,a.iD)("div",C,[(0,a.Wm)((0,o.SU)(l.Z),{item:$.value[0]},null,8,["item"]),$.value[0].active?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"bg-amber-400 px-5 py-2 rounded-lg text-gray-800 w-full md:w-4/12",onClick:R},"Añadir")):((0,a.wg)(),(0,a.iD)("button",{key:1,class:"bg-gray-300 px-5 py-2 rounded-lg text-gray-800 w-full md:w-4/12",disabled:!$.value[0].active},"Añadir",8,L)),(0,a._)("button",{class:"bg-amber-400 px-5 py-2 rounded-lg text-gray-800 w-full md:w-8/12",onClick:D},"Pagar")])):((0,a.wg)(),(0,a.iD)("div",E,P))])])])):(0,a.kq)("",!0)])),_:1})}}};const D=R;var S=D}}]);
//# sourceMappingURL=product_detail.f69d1a01.js.map