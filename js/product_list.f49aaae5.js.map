{"version":3,"file":"js/product_list.f49aaae5.js","mappings":"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","sources":["webpack://market/./src/services/categories.service.js","webpack://market/./src/services/products.service.js","webpack://market/./src/components/BtnAddLess.vue","webpack://market/./src/components/BtnAddLess.vue?11fb","webpack://market/./src/components/CardListTemplate.vue","webpack://market/./src/components/CardListTemplate.vue?0496","webpack://market/./src/views/ListProductView.vue","webpack://market/./src/views/ListProductView.vue?0d0a"],"sourcesContent":["import { apiService } from \"@/services/api.service.js\";\r\n\r\n\r\nexport const categoriesService = {\r\n\r\n    // allCategories\r\n    async allCategories() {\r\n        let url = `/marketplace-category`\r\n        try {\r\n            let res = await apiService.request({ url })\r\n            if(!res) throw {msg: 'Error en la solicitud de las categories',error: res};\r\n\r\n            return res;\r\n\r\n        } catch (error) {            \r\n            let errorMessage = `Error ${error.response?.status}: ${error.response?.statusText}\\nURL: ${url}\\nResponse data: ${JSON.stringify(error.response?.data)}`;\r\n            throw new Error(errorMessage);\r\n        }\r\n    },\r\n\r\n    // search-by-criteria\r\n    // async searchCategory(params) {\r\n        // let url = `/marketplace-items/search-by-criteria`\r\n        // try {\r\n\r\n        //     if(!authStore.token) authStore.getToken()\r\n\r\n        //     let options = {\r\n        //         url,\r\n        //         method: 'post',\r\n        //         token: authStore.token,\r\n        //         data: params\r\n        //     }\r\n        //     let res = await apiService.request(options)\r\n        //     if(!res) throw {msg: 'Error en la solicitud del producto',error: res};\r\n\r\n        //     return res;\r\n\r\n        // } catch (error) {            \r\n        //     let errorMessage = `Error ${error.response?.status}: ${error.response?.statusText}\\nURL: ${url}\\nResponse data: ${JSON.stringify(error.response?.data)}`;\r\n        //     throw new Error(errorMessage);\r\n        // }\r\n    // },    \r\n\r\n    // getCategory\r\n    async getCategory(id) {\r\n        let url = `/marketplace-category/${id}`\r\n        try {\r\n            let res = await apiService.request({ url })\r\n            if(!res) throw {msg: 'Error en la solicitud de la categoria',error: res};\r\n\r\n            return res;\r\n\r\n        } catch (error) {            \r\n            let errorMessage = `Error ${error.response?.status}: ${error.response?.statusText}\\nURL: ${url}\\nResponse data: ${JSON.stringify(error.response?.data)}`;\r\n            throw new Error(errorMessage);\r\n        }\r\n    },\r\n  \r\n};","import { apiService } from \"@/services/api.service.js\";\r\nimport { useAuthStore } from \"@/store/authStore\";\r\n\r\nconst authStore = useAuthStore();\r\n\r\nexport const productsService = {\r\n\r\n    // allProducts\r\n    async allProducts() {\r\n        let url = `/marketplace-items`\r\n        try {\r\n            let res = await apiService.request({ url })\r\n            if(!res) throw {msg: 'Error en la solicitud de los productos',error: res};\r\n\r\n            return res;\r\n\r\n        } catch (error) {            \r\n            let errorMessage = `Error ${error.response?.status}: ${error.response?.statusText}\\nURL: ${url}\\nResponse data: ${JSON.stringify(error.response?.data)}`;\r\n            throw new Error(errorMessage);\r\n        }\r\n    },\r\n\r\n    // search-by-criteria\r\n    async searchProduct(params) {\r\n        let url = `/marketplace-items/search-by-criteria`\r\n        try {\r\n\r\n            if(!authStore.token) authStore.getToken()\r\n\r\n            let options = {\r\n                url,\r\n                method: 'post',\r\n                token: authStore.token,\r\n                data: params\r\n            }\r\n            // console.log(options)\r\n\r\n            let res = await apiService.request(options)\r\n            // console.log(res)\r\n            if(!res) throw {msg: 'Error en la solicitud del producto',error: res};\r\n\r\n            return res;\r\n\r\n        } catch (error) {            \r\n            let errorMessage = `Error ${error.response?.status}: ${error.response?.statusText}\\nURL: ${url}\\nResponse data: ${JSON.stringify(error.response?.data)}`;\r\n            throw new Error(errorMessage);\r\n        }\r\n    },\r\n\r\n    // getProduct by Id\r\n    async getProductId(id) {\r\n        let url = `/marketplace-items/${id}`\r\n        try {\r\n    \r\n            if(!authStore.token) authStore.getToken()\r\n\r\n            let options = {\r\n                url,\r\n                token: authStore.token\r\n            }\r\n            let res = await apiService.request(options)\r\n            if(!res) throw {msg: 'Error en la solicitud del producto',error: res};\r\n\r\n            return res;\r\n\r\n        } catch (error) {            \r\n            let errorMessage = `Error ${error.response?.status}: ${error.response?.statusText}\\nURL: ${url}\\nResponse data: ${JSON.stringify(error.response?.data)}`;\r\n            throw new Error(errorMessage);\r\n        }\r\n    },\r\n\r\n    // getProduct by keyword\r\n    async getProductKeyword(keyword) {\r\n\r\n        if(!authStore.token) authStore.getToken()\r\n\r\n        let options = {\r\n            url: '/marketplace-items/search-by-criteria',\r\n            method: 'post',\r\n            token: authStore.token,\r\n            data: { keyword: keyword }\r\n        }\r\n        \r\n        try {\r\n            let res = await apiService.request(options)\r\n            if(!res) throw {msg: 'Error en la solicitud del producto',error: res};\r\n\r\n            return res;\r\n\r\n        } catch (error) {            \r\n            let errorMessage = `Error ${error.response?.status}: ${error.response?.statusText}\\nURL: ${options.url}\\nResponse data: ${JSON.stringify(error.response?.data)}`;\r\n            throw new Error(errorMessage);\r\n        }\r\n    },\r\n\r\n    // getProducts\r\n    async getProducts(list) {        \r\n        try {\r\n            let promises = list.map(el => this.getProductId(el.id));\r\n            let listProducts = await Promise.all(promises);\r\n    \r\n            if(listProducts.length === 0) throw {msg: 'Error en la función getProducts'};\r\n            return listProducts;\r\n    \r\n        } catch (error) {            \r\n            let errorMessage = `Error ${error.response?.status}: ${error.response?.statusText}\\nResponse data: ${JSON.stringify(error.response?.data)}`;\r\n            throw new Error(errorMessage);\r\n        }\r\n    },\r\n\r\n    // mergeCartWithList\r\n    mergeCartWithList(list,cart) {        \r\n        try {\r\n            list.forEach(product => {\r\n                cart.forEach(item => {\r\n                    if (product.id === item.id) {\r\n                        product.count = item.count;\r\n                    }\r\n                });\r\n            });\r\n            return list;\r\n    \r\n        } catch (error) {            \r\n            let errorMessage = {msg: 'Error en mergeCartWithList', error};\r\n            throw new Error(errorMessage);\r\n        }\r\n    },  \r\n\r\n    // getProductsWithPrice\r\n    getProductsWithPrice(list) {        \r\n        try {\r\n            \r\n            const prod = [];\r\n            list.forEach(product => {\r\n                const item = product;\r\n                const newItem = {\r\n                    marketplace_item_id: item.id,\r\n                    date: new Date().toISOString().slice(0,10),\r\n                    cant: item.count,\r\n                    price: (item.count * item.price).toString()\r\n                  };\r\n                  prod.push(newItem);               \r\n            });\r\n\r\n            return prod;\r\n\r\n        } catch (error) {            \r\n            let errorMessage = {msg: 'Error en mergeCartWithList', error};\r\n            throw new Error(errorMessage);\r\n        }\r\n    }, \r\n\r\n    // getTotalPriceOfAllProducts\r\n    getTotalPriceOfAllProducts(list) {        \r\n        try {\r\n            let totalPrice = 0;\r\n            list.forEach(product => {\r\n                    totalPrice += product.count*product.price                \r\n            });\r\n            return totalPrice;\r\n    \r\n        } catch (error) {            \r\n            let errorMessage = {msg: 'Error en mergeCartWithList', error};\r\n            throw new Error(errorMessage);\r\n        }\r\n    },  \r\n    \r\n\r\n};\r\n\r\n","<template>\r\n    <div class=\"flex items-center justify-between rounded-lg\">\r\n        <button class=\"rounded-l-lg bg-gray-300 w-8\" @click=\"lessCarToStore()\">-</button>\r\n        <div class=\"w-8 text-gray-800\" :class=\"{'scale-150 transition-transform animate-spin': animationPrice}\">{{ count }}</div>\r\n        <button class=\"rounded-r-lg bg-gray-300 w-8\" @click=\"addCarToStore()\">+</button>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n\r\nimport { useCartStore } from '@/store/cartStore'\r\nimport { ref,defineProps,defineEmits,computed } from 'vue'\r\n\r\nconst emits = defineEmits(['updCart'])\r\nconst shop = useCartStore()\r\nconst animationPrice = ref(false)\r\nconst props = defineProps({\r\n  item: Object\r\n})\r\n\r\nconst addCarToStore = () => {\r\n  handleUpdCart()\r\n  shop.addProduct(props.item)\r\n  emits('updCart')\r\n}\r\nconst lessCarToStore = () => {\r\n  handleUpdCart()\r\n  shop.removeProduct(props.item)\r\n  emits('updCart')\r\n}\r\n\r\nconst handleUpdCart = () => {\r\n    animationPrice.value = true\r\n    setTimeout(()=>{\r\n        animationPrice.value = false\r\n    },500)\r\n}\r\n\r\nconst count = computed(() => {\r\n  const product = shop.prods.find(product => product.id === props.item.id)\r\n  return product ? product.count : 0\r\n})\r\n</script>","import script from \"./BtnAddLess.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./BtnAddLess.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <section class=\"border border-gray-300 flex flex-col rounded-lg items-center w-60\">\r\n        <article class=\"\" >\r\n            <figure class=\"flex items-center w-60 h-52 px-1 bg-cover overflow-hidden border-b border-gray-300\">\r\n                <img :src=\"props.item.src\" alt=\"\" class=\" bg-slate-400 \">\r\n            </figure>\r\n            <figcaption class=\"flex flex-col \">\r\n                <h4 class=\"text-gray-800 text-base my-2 hover:cursor-pointer\" @click=\"navigateToProduct\">{{ props.item.alias}}</h4>                \r\n            </figcaption>\r\n        </article>\r\n        <div class=\"block w-full py-2\">\r\n            <div class=\"flex w-full justify-end pr-8\"><h4 class=\"text-sky-800 text-lg\">${{ props.item.price}}</h4></div>\r\n            <div class=\"flex px-2 gap-4 justify-between w-full\">\r\n                <btn-add-less :item=\"props.item\"/>\r\n                <button class=\"bg-amber-400 px-5 py-2 rounded-lg text-gray-800\" @click=\"navigateToCart()\">Añadir</button>\r\n            </div>\r\n        </div>\r\n    </section>\r\n</template>\r\n\r\n<script setup>\r\n\r\nimport BtnAddLess from './BtnAddLess'\r\nimport { defineProps } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { useCartStore } from '@/store/cartStore'\r\n\r\nconst router = useRouter()\r\nconst cart = useCartStore()\r\n\r\nconst props = defineProps({\r\n  item: Object\r\n})\r\n\r\nconst addCarToStore = () => cart.addProduct(props.item)\r\n\r\nconst navigateToProduct = () => {\r\n  router.push({ name: 'ProductDetail', params: { keyword: props.item.keyword } })\r\n}\r\n\r\nconst navigateToCart = () => {\r\n    addCarToStore()\r\n    router.push({ name: 'ShoppingCart'})\r\n}\r\n\r\n\r\n</script>\r\n","import script from \"./CardListTemplate.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CardListTemplate.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <MainLayout>\r\n        \r\n        <section class=\"flex gap-10 flex-row flex-wrap\">      \r\n            <!-- Panel Lateral -->\r\n            <!-- <FilterTemplate @updFilter=\"applyFiler\" @updCategory=\"applyCategory\"/> -->\r\n            \r\n            <!-- Section de Productos -->\r\n            \r\n            <figure v-show=\"loading\" class=\"m-auto\"><img src=\"@/assets/images/loader.svg\" alt=\"loading...\"></figure>\r\n\r\n            <section class=\"flex flex-col flex-1 gap-8\" v-show=\"!loading\">\r\n                <div class=\"flex bg-red-500 m-auto p-20 rounded-lg\" v-show=\"error\">\r\n                    <span class=\"text-lg text-white\" v-text=\"errorMessage\"></span>\r\n                </div>\r\n                <h3 class=\"text-sky-800 text-2xl capitalize\" v-if=\"category\">{{ category }}</h3>\r\n                <!-- <div class=\"flex justify-end\"><select class=\"w-24\"><option value=\"\">precio</option><option value=\"\">más populares</option></select></div> -->\r\n                <section class=\"flex flex-wrap gap-5 justify-items-center\" v-if=\"productsAPI.length>0\">                    \r\n                    <CardListTemplate  v-for=\"(item, index) in productsAPI\" :key=\"index\" :item=\"item\" class=\"\"/>                    \r\n                </section>\r\n                <section class=\"flex mx-auto p-20\" v-else>\r\n                    <span class=\"text-lg\">No hay productos para esta categoría</span>\r\n                </section>\r\n            </section>\r\n        </section>\r\n        \r\n    </MainLayout>\r\n</template>\r\n\r\n<script setup>\r\n\r\n\r\nimport MainLayout from '@/layouts/MainLayout.vue'\r\nimport CardListTemplate from '@/components/CardListTemplate.vue'\r\n// import FilterTemplate from '@/components/FilterTemplate.vue'\r\nimport { ref,onBeforeMount } from 'vue'\r\nimport { categoriesService } from '@/services/categories.service'\r\nimport { productsService } from '@/services/products.service'\r\n\r\nimport { useRoute,useRouter } from 'vue-router'\r\nimport { computed } from 'vue'\r\n// import { useSearchStore } from '@/store/searchStore'\r\n\r\n// import { useCartStore } from '@/store/cartStore'\r\n\r\n\r\nconst route = useRoute()\r\nconst router = useRouter()\r\nconst loading = ref(true)\r\n// const searchStore = useSearchStore()\r\nlet error = ref(false)\r\nlet errorMessage = ref('Error al consultar los datos, por favor intente más tarde')\r\n\r\nconst category = computed(() => route.params.keyword)\r\nconst categoriesAPI = ref([])\r\nconst productsAPI = ref([])\r\n\r\n// const applyCategory = (item) => {\r\n//     fetchData(item.alias);    \r\n// }\r\n\r\nonBeforeMount(() => {\r\n  fetchData(category.value);\r\n});\r\n\r\nconst fetchData = async (item) => {\r\n  try {\r\n    let params = {\r\n      \"type\": \"category\",\r\n      \"value\": item\r\n    };\r\n\r\n    [categoriesAPI.value, productsAPI.value] = await Promise.all([\r\n      categoriesService.allCategories(),\r\n      productsService.searchProduct(params)\r\n    ]);\r\n    loading.value = false\r\n\r\n    if (!categoriesAPI.value) {\r\n      error.value = true\r\n      throw { msg: 'Error en obtener las categorías', error: categoriesAPI.value }\r\n    }\r\n    if (!productsAPI.value) {\r\n      error.value = true\r\n      throw { msg: 'Error en obtener las productos', error: categoriesAPI.value }\r\n    }\r\n\r\n    // Revisar si existe esa categoria sino enviar a not found\r\n    let value = categoriesAPI.value.find(el => el.alias === category.value);\r\n    if (!value) router.push({ name: 'NotFound' });\r\n\r\n  } catch (error) {\r\n    console.error(\"Error al obtener las categorías o los productos: \", error);\r\n    throw error\r\n  }\r\n}\r\n\r\n// const applyFiler = () => {\r\n//     productsAPI.value.map(el => el.price >= searchStore.min && el.price <= searchStore.max)\r\n// }\r\n\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.height_aside{\r\n\r\n}\r\n\r\n.input_form {\r\n    @apply flex w-full border border-gray-300 px-5 py-2 placeholder-gray-400 text-sky-800 rounded-lg\r\n    focus:ring-1 focus:border-sky-600 focus:outline-none;\r\n}\r\n</style>","import script from \"./ListProductView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ListProductView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ListProductView.vue?vue&type=style&index=0&id=47b12288&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-47b12288\"]])\n\nexport default __exports__"],"names":["categoriesService","async","url","res","apiService","request","msg","error","errorMessage","response","status","statusText","JSON","stringify","data","Error","id","authStore","useAuthStore","productsService","params","token","getToken","options","method","keyword","list","promises","map","el","this","getProductId","listProducts","Promise","all","length","mergeCartWithList","cart","forEach","product","item","count","getProductsWithPrice","prod","newItem","marketplace_item_id","date","Date","toISOString","slice","cant","price","toString","push","getTotalPriceOfAllProducts","totalPrice","shop","useCartStore","animationPrice","ref","addCarToStore","handleUpdCart","addProduct","props","emits","lessCarToStore","removeProduct","value","setTimeout","computed","prods","find","__exports__","router","useRouter","navigateToProduct","name","navigateToCart","route","useRoute","loading","category","categoriesAPI","productsAPI","onBeforeMount","fetchData","allCategories","searchProduct","alias","console"],"sourceRoot":""}